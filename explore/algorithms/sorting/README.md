# ソートアルゴリズム

## 主要な3つのアルゴリズム

### バブルソート

- **仕組み**: 隣接要素を比較・交換
- **時間**: O(n²)、ほぼソート済みなら改良版でO(n)
- **空間**: O(1) - in-place
- **安定**: ✓

### マージソート

- **仕組み**: 分割統治（再帰的に分割→マージ）
- **時間**: O(n log n) - 常に一定
- **空間**: O(n) - 追加配列が必要
- **安定**: ✓
- **安定な理由**: マージ時に同じ値の場合は必ず左側（元の順序で前）の要素を先に選ぶため
  - 例：左`[(2,'A'), (3,'B')]`と右`[(2,'C'), (4,'D')]`をマージ
  - `2 == 2`の場合、左側の`(2,'A')`を先に選択
  - 結果：`[(2,'A'), (2,'C'), (3,'B'), (4,'D')]` - 元の順序を保持

### クイックソート

- **仕組み**: ピボットで分割（Lomutoパーティション）
- **時間**: 平均O(n log n)、最悪O(n²)
- **空間**: O(1) - in-place（再帰スタック除く）
- **安定**: ✗
- **不安定な理由**: パーティション処理で離れた位置の要素と交換を行うため、同じ値を持つ要素の相対的な順序が崩れる
  - 例：`[(2,'A'), (3,'B'), (2,'C'), (1,'D')]`でピボット3の場合
  - パーティション後：`[(1,'D'), (2,'C'), (2,'A'), (3,'B')]`
  - 元の順序では`(2,'A')`が`(2,'C')`より前だったが、逆転している

## 使い分け

| 状況 | 推奨アルゴリズム | 理由 |
|------|-----------------|------|
| ほぼソート済み | 改良版バブルソート | O(n)で処理可能 |
| 安定性が必要 | マージソート | 高速かつ安定 |
| メモリ制限あり | クイックソート | in-placeで高速 |
